<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title id="title">Setup</title>
		<!-- Bootstrap CSS -->
		<link
			href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
			rel="stylesheet"
		/>
	</head>
	<body>
		<div class="container mt-5">
			<h2 class="mb-4" id="setup">Amber Development Environment</h2>
			<form id="dynamic-form">
				<div id="inputs-container">
					<input type="text" id="console" name="console" class="form-control" />
				</div>
				<button type="submit" class="btn btn-primary mt-3">Submit</button>
			</form>
		</div>

		<!-- Bootstrap JS and Popper.js -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

		<script>
			// Fetch inputs from the Flask route and display them

			document
				.getElementById("dynamic-form")
				.addEventListener("submit", function (event) {
					event.preventDefault();

					const formData = new FormData(event.target);
					const data = {};
					formData.forEach((value, key) => {
						data[key] = value;
					});

					console.log(data);

					// Send data to Flask backend
					fetch("/submit-command", {
						method: "POST",
						headers: {
							"Content-Type": "application/json",
						},
						body: JSON.stringify(data),
					})
						.then((response) => response.json())
						.then((result) => {
							console.log(result); // You can handle the response here if needed
							document.getElementById("console").value = "";
						});
				});
		</script>
	</body>
</html>
